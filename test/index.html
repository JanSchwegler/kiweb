<!-- https://upload.wikimedia.org/wikipedia/en/d/dc/Strawberry_Fields_Forever_(Beatles_song_-_sample).ogg -->    

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rotate Div Around Center</title>
<style>
    #scrubber {
        width: 500px;
        height: 300px;
        background-color: blue;
        position: absolute;
        top: 20%;
        left: 20%;
        cursor: pointer;
    }
</style>
</head>
<body>

<div id="scrubber"></div>

<script>
    // Get the scrubber element
    var scrubber = document.getElementById('scrubber');

    // Variables to store initial values
    var initialTouchAngle = 0;
    var initialElementAngle = 0;
    var centerX = scrubber.offsetLeft + scrubber.offsetWidth / 2;
    var centerY = scrubber.offsetTop + scrubber.offsetHeight / 2;

    // Boolean to track whether dragging is active
    var dragging = false;

    // Event listener for touch events
    scrubber.addEventListener('touchstart', function(event) {
        dragging = true;
        var touch = event.touches[0];
        initialTouchAngle = Math.atan2(touch.clientY - centerY, touch.clientX - centerX);
        initialElementAngle = getRotationDegrees(scrubber);
    });

    scrubber.addEventListener('touchmove', function(event) {
        event.preventDefault();
        if (dragging) {
            var touch = event.touches[0];
            var currentTouchAngle = Math.atan2(touch.clientY - centerY, touch.clientX - centerX);
            var angleDiff = currentTouchAngle - initialTouchAngle;
            var newRotation = (angleDiff * (180 / Math.PI)) + initialElementAngle;
            scrubber.style.transform = 'rotate(' + newRotation + 'deg)';
        }
    });

    scrubber.addEventListener('touchend', function() {
        dragging = false;
    });

    // Event listeners for mouse events
    scrubber.addEventListener('mousedown', function(event) {
        dragging = true;
        initialTouchAngle = Math.atan2(event.clientY - centerY, event.clientX - centerX);
        initialElementAngle = getRotationDegrees(scrubber);
    });

    document.addEventListener('mousemove', function(event) {
        if (dragging) {
            var currentTouchAngle = Math.atan2(event.clientY - centerY, event.clientX - centerX);
            var angleDiff = currentTouchAngle - initialTouchAngle;
            var newRotation = (angleDiff * (180 / Math.PI)) + initialElementAngle;
            scrubber.style.transform = 'rotate(' + newRotation + 'deg)';
        }
    });

    document.addEventListener('mouseup', function() {
        dragging = false;
    });

    // Function to get the current rotation angle of an element
    function getRotationDegrees(element) {
        var transform = window.getComputedStyle(element).getPropertyValue('transform');
        var matrix = transform.match(/^matrix\((.+)\)$/);
        if (matrix) {
            var values = matrix[1].split(',');
            var a = values[0];
            var b = values[1];
            var angle = Math.round(Math.atan2(b, a) * (180 / Math.PI));
            return (angle < 0) ? angle + 360 : angle;
        }
        return 0;
    }
</script>

</body>
</html>
